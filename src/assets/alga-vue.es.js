import{ref as e,computed as a}from"vue";import{date as u,number as l}from"alga-js";function v(l=null,v=null,t=null,n={value:"en-US"},r={value:"short"}){const s=e(0),o=e(0),D=e(0);s.value=null!==l&&0!==l.value?l.value:Number((new Date).getFullYear()),o.value=null!==v&&0!==v.value?v.value:Number((new Date).getMonth())+1,D.value=null!==t&&0!==t.value?t.value:Number((new Date).getDate());const m=a((()=>u.days(n.value,r.value))),b=a((()=>{const e=Number(new Date(s.value,Number(o.value)-1,1).getDay());let a=[];if(e>0){for(let l=Number(u.daysInMonth(s.value,Number(o.value)-1))-(e-1);l<=Number(u.daysInMonth(s.value,Number(o.value)-1));l++)a.push(l)}return a})),N=a((()=>u.daysInMonth(s.value,o.value))),h=a((()=>{const e=Number(new Date(s.value,Number(o.value)-1,Number(u.daysInMonth(s.value,o.value))).getDay());let a=[];if(e<6){const u=6-e;for(let e=1;e<=u;e++)a.push(e)}return a})),y=Number(new Date(s.value,Number(o.value)-1,D.value).getDay()),g=a((()=>{let e=[];if(y>0){const a=y+1;for(let l=1;l<a;l++)e.push(u.subtractDate(new Date(s.value,Number(o.value)-1,D.value),l).valueOf())}return e})),w=a((()=>{let e=[];if(y<6){const a=6-y;for(let l=1;l<=a;l++)e.push(u.subtractDate(new Date(s.value,Number(o.value)-1,D.value),l).valueOf())}return e}));return{setYearRef:s,setMonthRef:o,setDayRef:D,weekDays:m,prevDays:b,monthDays:N,nextDays:h,beforeDays:g,afterDays:w}}function t(v=null,t=null,n=null,r={value:"en-US"},s={value:"short"}){const o=e(0),D=e(0),m=e(0),b=e(0),N=e(0),h=e(""),y=e(0);o.value=null!==v&&0!==v.value?v.value:Number((new Date).getFullYear()),D.value=null!==t&&0!==t.value?t.value:Number((new Date).getMonth())+1,m.value=null!==n&&0!==n.value?n.value:(new Date).getDate();const g=a((()=>{const e=0!==b.value?b.value:1980,a=0!==N.value?N.value:Number((new Date).getFullYear())+5;return l.loop(e,a)})),w=a((()=>u.months(r.value,s.value))),f=a((()=>u.days(r.value,s.value))),d=a((()=>u.week(o.value,D.value,m.value)));y.value=d.value;const M=a((()=>{let e="";return e="daily"===h.value?`${f.value[new Date(o.value,Number(D.value)-1,m.value).getDay()]}, ${m.value} ${w.value[new Date(o.value,Number(D.value)-1).getMonth()]} ${o.value}`:"weekly"===h.value?`Week ${y.value}`:"yearly"===h.value?`${o.value}`:`${w.value[new Date(o.value,Number(D.value)-1).getMonth()]} ${o.value}`,e}));return{setYearRef:o,setMonthRef:D,setDayRef:m,setWeeks:y,setCalendarType:h,startYear:b,endYear:N,getRangeYears:g,getMonthNames:w,getDayNames:f,getWeeks:d,getCalendarTitle:M,handleYear:e=>{o.value="prev"===e?o.value-1:"next"===e?o.value+1:(new Date).getFullYear()},handleMonth:e=>{"prev"===e?D.value>1&&D.value<=12?D.value=D.value-1:1===D.value&&(D.value=12,o.value=o.value-1):"next"===e?D.value>=1&&D.value<12?D.value=D.value+1:12===D.value&&(D.value=1,o.value=o.value+1):(D.value=Number((new Date).getMonth())+1,o.value=(new Date).getFullYear())},handleWeek:e=>{"prev"===e?1!==y.value?y.value=y.value-1:y.value=52:"next"===e?52!==y.value?y.value=y.value+1:y.value=1:y.value=d.value},handleDay:e=>{"prev"===e?1!==m.value?m.value=m.value-1:(m.value=Number(u.daysInMonth(o.value,Number(D.value)-1)),D.value>1&&D.value<=12?D.value=D.value-1:1===D.value&&(D.value=12,o.value=o.value-1)):"next"===e?m.value!==Number(u.daysInMonth(o.value,D.value))?m.value=m.value+1:(m.value=1,D.value>=1&&D.value<12?D.value=D.value+1:12===D.value&&(D.value=1,o.value=o.value+1)):(D.value=Number((new Date).getMonth())+1,o.value=(new Date).getFullYear(),m.value=(new Date).getDate())}}}export{t as handleCalendar,v as useCalendar};
