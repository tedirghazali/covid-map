import{ref as e,computed as a}from"vue";import{date as u,array as l,number as v}from"alga-js";function t(v=null,t=null,n=null,r={value:"en-US"},s={value:"short"}){const D=e(0),o=e(0),g=e(0),m=e(0),N=e([]);D.value=null!==v&&0!==v.value?v.value:Number((new Date).getFullYear()),o.value=null!==t&&0!==t.value?t.value:Number((new Date).getMonth())+1,g.value=null!==n&&0!==n.value?n.value:Number((new Date).getDate());const b=a((()=>u.days(r.value,s.value))),h=a((()=>u.week(D.value,o.value,g.value)));m.value=h.value;const y=a((()=>u.weeks(D.value,m.value,"YYYY-MM-DD"))),w=a((()=>{const e=Number(new Date(D.value,Number(o.value)-1,1).getDay());let a=[];if(e>0){for(let l=Number(u.daysInMonth(D.value,Number(o.value)-1))-(e-1);l<=Number(u.daysInMonth(D.value,Number(o.value)-1));l++)a.push(l)}return a})),Y=a((()=>u.daysInMonth(D.value,o.value))),M=a((()=>{const e=Number(new Date(D.value,Number(o.value)-1,Number(u.daysInMonth(D.value,o.value))).getDay());let a=[];if(e<6){const u=6-e;for(let e=1;e<=u;e++)a.push(e)}return a})),f=Number(new Date(D.value,Number(o.value)-1,g.value).getDay()),d=a((()=>{let e=[];if(f>0){const a=f+1;for(let l=1;l<a;l++)e.push(u.subtractDate(new Date(D.value,Number(o.value)-1,g.value),l),"YYYY-MM-DD")}return e})),c=a((()=>{let e=[];if(f<6){const a=6-f;for(let l=1;l<=a;l++)e.push(u.addDate(new Date(D.value,Number(o.value)-1,g.value),l),"YYYY-MM-DD")}return e})),p=a((()=>l.group(N.value,(e=>new Date(e.startdate).getDate()))));return{setYearRef:D,setMonthRef:o,setDayRef:g,setWeeks:m,getWeeks:h,getWeekDays:y,getDayNames:b,getPrevDays:w,getMonthDays:Y,getNextDays:M,getBeforeDays:d,getAfterDays:c,setEvents:N,getEvents:p}}function n(l=null,t=null,n=null,r={value:"en-US"},s={value:"short"},D={value:"long"}){const o=e(0),g=e(0),m=e(0),N=e(0),b=e(0),h=e(""),y=e(0);o.value=null!==l&&0!==l.value?l.value:Number((new Date).getFullYear()),g.value=null!==t&&0!==t.value?t.value:Number((new Date).getMonth())+1,m.value=null!==n&&0!==n.value?n.value:(new Date).getDate();const w=a((()=>{const e=0!==N.value?N.value:1980,a=0!==b.value?b.value:Number((new Date).getFullYear())+5;return v.loop(e,a)})),Y=a((()=>u.months(r.value,D.value))),M=a((()=>u.days(r.value,s.value))),f=a((()=>u.week(o.value,g.value,m.value)));y.value=f.value;const d=a((()=>{let e="";return e="daily"===h.value?`${M.value[new Date(o.value,Number(g.value)-1,m.value).getDay()]}, ${m.value} ${Y.value[new Date(o.value,Number(g.value)-1).getMonth()]} ${o.value}`:"weekly"===h.value?`Week ${y.value}`:"yearly"===h.value?`${o.value}`:`${Y.value[new Date(o.value,Number(g.value)-1).getMonth()]} ${o.value}`,e}));return{setYearRef:o,setMonthRef:g,setDayRef:m,setWeeks:y,setCalendarType:h,startYear:N,endYear:b,getRangeYears:w,getMonthNames:Y,getDayNames:M,getWeeks:f,getCalendarTitle:d,handleYear:e=>{o.value="prev"===e?o.value-1:"next"===e?o.value+1:(new Date).getFullYear()},handleMonth:e=>{"prev"===e?g.value>1&&g.value<=12?g.value=g.value-1:1===g.value&&(g.value=12,o.value=o.value-1):"next"===e?g.value>=1&&g.value<12?g.value=g.value+1:12===g.value&&(g.value=1,o.value=o.value+1):(g.value=Number((new Date).getMonth())+1,o.value=(new Date).getFullYear())},handleWeek:e=>{"prev"===e?1!==y.value?y.value=y.value-1:y.value=52:"next"===e?52!==y.value?y.value=y.value+1:y.value=1:y.value=f.value},handleDay:e=>{"prev"===e?1!==m.value?m.value=m.value-1:(m.value=Number(u.daysInMonth(o.value,Number(g.value)-1)),g.value>1&&g.value<=12?g.value=g.value-1:1===g.value&&(g.value=12,o.value=o.value-1)):"next"===e?m.value!==Number(u.daysInMonth(o.value,g.value))?m.value=m.value+1:(m.value=1,g.value>=1&&g.value<12?g.value=g.value+1:12===g.value&&(g.value=1,o.value=o.value+1)):(g.value=Number((new Date).getMonth())+1,o.value=(new Date).getFullYear(),m.value=(new Date).getDate())}}}export{n as handleCalendar,t as useCalendar};
